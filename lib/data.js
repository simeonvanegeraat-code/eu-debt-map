// EU-27 countries only
export const countries = [
  // Demo values â€” replace with real later:
  { code: "NL", name: "Netherlands", flag: "ğŸ‡³ğŸ‡±",
    prev_value_eur: 420_000_000_000, prev_date: "2023-12-31",
    last_value_eur: 415_000_000_000,  last_date: "2024-06-30" },
  { code: "DE", name: "Germany", flag: "ğŸ‡©ğŸ‡ª",
    prev_value_eur: 2_400_000_000_000, prev_date: "2023-12-31",
    last_value_eur: 2_450_000_000_000,  last_date: "2024-06-30" },
  { code: "FR", name: "France", flag: "ğŸ‡«ğŸ‡·",
    prev_value_eur: 2_950_000_000_000, prev_date: "2023-12-31",
    last_value_eur: 2_970_000_000_000,  last_date: "2024-06-30" },
  { code: "IT", name: "Italy", flag: "ğŸ‡®ğŸ‡¹",
    prev_value_eur: 2_800_000_000_000, prev_date: "2023-12-31",
    last_value_eur: 2_790_000_000_000,  last_date: "2024-06-30" },
  { code: "ES", name: "Spain", flag: "ğŸ‡ªğŸ‡¸",
    prev_value_eur: 1_550_000_000_000, prev_date: "2023-12-31",
    last_value_eur: 1_565_000_000_000,  last_date: "2024-06-30" },

  // Placeholders for the rest of EU-27 (grey until filled):
  { code: "AT", name: "Austria", flag: "ğŸ‡¦ğŸ‡¹", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "BE", name: "Belgium", flag: "ğŸ‡§ğŸ‡ª", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "BG", name: "Bulgaria", flag: "ğŸ‡§ğŸ‡¬", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "HR", name: "Croatia", flag: "ğŸ‡­ğŸ‡·", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "CY", name: "Cyprus", flag: "ğŸ‡¨ğŸ‡¾", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "CZ", name: "Czechia", flag: "ğŸ‡¨ğŸ‡¿", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "DK", name: "Denmark", flag: "ğŸ‡©ğŸ‡°", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "EE", name: "Estonia", flag: "ğŸ‡ªğŸ‡ª", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "FI", name: "Finland", flag: "ğŸ‡«ğŸ‡®", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "GR", name: "Greece", flag: "ğŸ‡¬ğŸ‡·", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "HU", name: "Hungary", flag: "ğŸ‡­ğŸ‡º", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "IE", name: "Ireland", flag: "ğŸ‡®ğŸ‡ª", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "LV", name: "Latvia", flag: "ğŸ‡±ğŸ‡»", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "LT", name: "Lithuania", flag: "ğŸ‡±ğŸ‡¹", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "LU", name: "Luxembourg", flag: "ğŸ‡±ğŸ‡º", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "MT", name: "Malta", flag: "ğŸ‡²ğŸ‡¹", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "PL", name: "Poland", flag: "ğŸ‡µğŸ‡±", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "PT", name: "Portugal", flag: "ğŸ‡µğŸ‡¹", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "RO", name: "Romania", flag: "ğŸ‡·ğŸ‡´", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "SK", name: "Slovakia", flag: "ğŸ‡¸ğŸ‡°", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "SI", name: "Slovenia", flag: "ğŸ‡¸ğŸ‡®", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" },
  { code: "SE", name: "Sweden", flag: "ğŸ‡¸ğŸ‡ª", prev_value_eur: 0, prev_date: "2023-12-31", last_value_eur: 0, last_date: "2024-06-30" }
];

export function trendFor(c){
  return c.last_value_eur - c.prev_value_eur;
}

export function interpolateDebt(c, atMs){
  const t0 = new Date(c.prev_date).getTime();
  const t1 = new Date(c.last_date).getTime();
  const v0 = c.prev_value_eur;
  const v1 = c.last_value_eur;
  if (t1 <= t0) return v1;

  const rate = (v1 - v0) / (t1 - t0);

  if (atMs <= t0) return v0;
  if (atMs <= t1) return v0 + rate * (atMs - t0);

  // Extrapolate after last_date (capped to 180 days)
  const MAX_FWD_MS = 180 * 24 * 3600 * 1000;
  const dt = Math.min(atMs - t1, MAX_FWD_MS);
  return v1 + rate * dt;
}
